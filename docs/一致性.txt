两阶段提交(2PC Two Phase Commit)
一阶段提交(Best Efforts, 1PC One Phase Commit)
事务补偿机制

三个概念：

网络通讯的危险期、一阶段提交(1PC)和两阶段提交(2PC)
网络通讯的危险期

由于网络通讯故障随时可能发生，任何发出请求后等待回应的程序都会有失去联系的危险。这种危险发生在发出请求之后，服务器返回应答之前，如果在这个期间网
络通讯发生故障，发出请求一方无法收到回应，于是无法判断服务器是否已经成功地处理请求，因为收不到回应可能是请求没有成功地发送到服务器，也可能是服务
器处理完成后的回应无法传回请求方。这段时间称为网络通讯的危险期（In-doubt Time）。

一阶段提交(1PC One Phase Commit)

一阶段提交就是事务处理器向数据库服务器发出提交请求，然后等待数据库服务器的回应，收到回应后完成事务的提交，或者服务器返回提交失败的结果就回撤事
务。危险期从发出请求开始，到收到回应结束，这段时间中数据库完成数据的修改、日志记录等处理，处理越复杂，危险期就越长。

两阶段提交(2PC Two Phase Commit)

两阶段提交把事务提交分成两个阶段：
第一阶段，事务处理器向数据库服务器发出"准备提交"请求，数据库收到请求后执行相同的数据修改和日志记录等处理，不同的是处理完成后只是把事务的状态改成
"可以提交",然后把结果返回给事务处理器。
事务处理器收到回应后进入第二阶段，如果在第一阶段内的危险期中发生了故障，事务处理器收不到回应，则认为事务失败，回撤事务。数据库服务器收不到第二阶
段的确认提交请求，把"可以提交"的事务回撤.
两阶段的第二阶段中事务处理器向数据库服务器发出"确认提交"请求，数据库服务器把事务的"可以提交"状态改为"提交完成"状态，然后返回应答。
从严格意义上说，两阶段提交并没有完全解决网络通讯危险期的问题，但因为第二阶段的处理很简单，只是修改了事务的状态，与第一阶段相比其处理时间极短，所
以危险期极短，发生事务提交故障的可能性几乎不存在。

三阶段提交协议(3PC Three Phrase Commit)
针对两阶段提交存在的问题，三阶段提交协议通过引入一个“预询盘”阶段，以及超时策略来减少整个集群的阻塞时间，提升系统性能。三阶段提交的三个阶段分别为
can_commit，pre_commit，do_commit。

http://www.javaworld.com/article/2077963/open-source-tools/distributed-transactions-in-spring--with-and-without-xa.html
